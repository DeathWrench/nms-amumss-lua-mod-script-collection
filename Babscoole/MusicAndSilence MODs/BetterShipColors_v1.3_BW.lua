DataTable =
{
    {
        ["PALETTE"] = "Paint",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            { ["R"]="1", ["G"]="1", ["B"]="1", ["A"]="1" },
            { ["R"]="0.99", ["G"]="0.99", ["B"]="0.99", ["A"]="1" },
            { ["R"]="0.98", ["G"]="0.98", ["B"]="0.98", ["A"]="1" },
            { ["R"]="0.97", ["G"]="0.97", ["B"]="0.97", ["A"]="1" },
            { ["R"]="-1", ["G"]="-1", ["B"]="-1", ["A"]="1" },
            { ["R"]="-0.99", ["G"]="-0.99", ["B"]="-0.99", ["A"]="1" },
            { ["R"]="-0.98", ["G"]="-0.98", ["B"]="-0.98", ["A"]="1" },
            { ["R"]="-0.97", ["G"]="-0.97", ["B"]="-0.97", ["A"]="1" },
            { ["R"]="0.918", ["G"]="0.925", ["B"]="0.949", ["A"]="1" },
            { ["R"]="0.913", ["G"]="0.92", ["B"]="0.944", ["A"]="1" },
            { ["R"]="0.908", ["G"]="0.915", ["B"]="0.939", ["A"]="1" },
            { ["R"]="0.903", ["G"]="0.91", ["B"]="0.934", ["A"]="1" },
            { ["R"]="-0.985", ["G"]="-0.985", ["B"]="-0.978", ["A"]="1" },
            { ["R"]="-0.98", ["G"]="-0.98", ["B"]="-0.973", ["A"]="1" },
            { ["R"]="-0.975", ["G"]="-0.975", ["B"]="-0.968", ["A"]="1" },
            { ["R"]="-0.97", ["G"]="-0.97", ["B"]="-0.963", ["A"]="1" },
            { ["R"]="0.286", ["G"]="0.035", ["B"]="0.075", ["A"]="1" },
            { ["R"]="0.353", ["G"]="0.043", ["B"]="0.094", ["A"]="1" },
            { ["R"]="0.498", ["G"]="0.082", ["B"]="0.129", ["A"]="1" },
            { ["R"]="0.6", ["G"]="0.098", ["B"]="0.141", ["A"]="1" },
            { ["R"]="0.286", ["G"]="0.035", ["B"]="0.055", ["A"]="1" },
            { ["R"]="0.353", ["G"]="0.043", ["B"]="0.067", ["A"]="1" },
            { ["R"]="0.5", ["G"]="0.082", ["B"]="0.094", ["A"]="1" },
            { ["R"]="0.6", ["G"]="0.098", ["B"]="0.098", ["A"]="1" },
            { ["R"]="0.678", ["G"]="0.259", ["B"]="0.106", ["A"]="1" },
            { ["R"]="0.749", ["G"]="0.329", ["B"]="0.122", ["A"]="1" },
            { ["R"]="0.788", ["G"]="0.522", ["B"]="0.157", ["A"]="1" },
            { ["R"]="0.812", ["G"]="0.655", ["B"]="0.184", ["A"]="1" },
            { ["R"]="0.867", ["G"]="0.745", ["B"]="0.129", ["A"]="1" },
            { ["R"]="0.839", ["G"]="0.788", ["B"]="0.212", ["A"]="1" },
            { ["R"]="0.902", ["G"]="0.902", ["B"]="0.239", ["A"]="1" },
            { ["R"]="0.937", ["G"]="0.976", ["B"]="0.482", ["A"]="1" },
            { ["R"]="0.647", ["G"]="0.867", ["B"]="0.223", ["A"]="1" },
            { ["R"]="0.486", ["G"]="0.78", ["B"]="0.192", ["A"]="1" },
            { ["R"]="0.149", ["G"]="0.741", ["B"]="0.2", ["A"]="1" },
            { ["R"]="0.063", ["G"]="0.298", ["B"]="0.18", ["A"]="1" },
            { ["R"]="0.074", ["G"]="0.357", ["B"]="0.216", ["A"]="1" },
            { ["R"]="0.094", ["G"]="0.443", ["B"]="0.267", ["A"]="1" },
            { ["R"]="0.118", ["G"]="0.553", ["B"]="0.314", ["A"]="1" },
            { ["R"]="0.133", ["G"]="0.635", ["B"]="0.361", ["A"]="1" },
            { ["R"]="0.09", ["G"]="0.404", ["B"]="0.38", ["A"]="1" },
            { ["R"]="0.122", ["G"]="0.541", ["B"]="0.506", ["A"]="1" },
            { ["R"]="0.165", ["G"]="0.725", ["B"]="0.725", ["A"]="1" },
            { ["R"]="0.082", ["G"]="0.314", ["B"]="0.431", ["A"]="1" },
            { ["R"]="0.106", ["G"]="0.408", ["B"]="0.561", ["A"]="1" },
            { ["R"]="0.149", ["G"]="0.569", ["B"]="0.776", ["A"]="1" },
            { ["R"]="0.367", ["G"]="0.722", ["B"]="0.898", ["A"]="1" },
            { ["R"]="0.537", ["G"]="0.796", ["B"]="0.898", ["A"]="1" },
            { ["R"]="0.051", ["G"]="0.157", ["B"]="0.361", ["A"]="1" },
            { ["R"]="0.063", ["G"]="0.2", ["B"]="0.482", ["A"]="1" },
            { ["R"]="0.071", ["G"]="0.2", ["B"]="0.592", ["A"]="1" },
            { ["R"]="0.09", ["G"]="0.286", ["B"]="0.682", ["A"]="1" },
            { ["R"]="0.02", ["G"]="0.051", ["B"]="0.4", ["A"]="1" },
            { ["R"]="0.055", ["G"]="0.09", ["B"]="0.478", ["A"]="1" },
            { ["R"]="0.098", ["G"]="0.137", ["B"]="0.557", ["A"]="1" },
            { ["R"]="0.125", ["G"]="0.216", ["B"]="0.725", ["A"]="1" },
            { ["R"]="0.141", ["G"]="0.059", ["B"]="0.31", ["A"]="1" },
            { ["R"]="0.22", ["G"]="0.086", ["B"]="0.424", ["A"]="1" },
            { ["R"]="0.404", ["G"]="0.322", ["B"]="0.635", ["A"]="1" },
            { ["R"]="0.275", ["G"]="0.114", ["B"]="0.439", ["A"]="1" },
            { ["R"]="0.459", ["G"]="0.325", ["B"]="0.643", ["A"]="1" },
            { ["R"]="0.274", ["G"]="0.345", ["B"]="0.25", ["A"]="1" },
            { ["R"]="0.6", ["G"]="0.49", ["B"]="0.757", ["A"]="1" },
            { ["R"]="0.678", ["G"]="0.416", ["B"]="0.678", ["A"]="1" },
        }
    },
}

NMS_MOD_DEFINITION_CONTAINER =
{
    ["MOD_FILENAME"]  = "BetterShipColors_v1.3_BW.pak",
    ["MOD_AUTHOR"]    = "MusicAndSilence",
    ["LUA_AUTHOR"]    = "Babscoole",	
    ["NMS_VERSION"]   = "3.97",
    ["MODIFICATIONS"] =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"]  = "METADATA\\SIMULATION\\SOLARSYSTEM\\COLOURS\\BASECOLOURPALETTES.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
					
                    }
                }
            }
        }
    }
}


function GetColours(R,G,B,A)
    return
    [[
    <Property value="Colour.xml">
          <Property name="R" value="]].. R ..[[" />
          <Property name="G" value="]].. G ..[[" />
          <Property name="B" value="]].. B ..[[" />
          <Property name="A" value="]].. A ..[[" />
        </Property>
    ]]
end

function CreateColoursProperty(PaletteColours)
    local PropertiesString = ""

    for j = 1, #PaletteColours do
        local R = PaletteColours[j]["R"]
        local G = PaletteColours[j]["G"]
        local B = PaletteColours[j]["B"]
        local A = PaletteColours[j]["A"]
        PropertiesString = PropertiesString..GetColours(R, G, B, A)
    end
    local PropertyColoursString = 
    [[      <Property name="Colours">
    ]]..PropertiesString..[[
  </Property>]]
    
    -- print(PropertyColoursString)
    return PropertyColoursString
end

local BaseColourPalettesTable  = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][1]["EXML_CHANGE_TABLE"]
for i = 1, #DataTable do
    local Palette = DataTable[i]["PALETTE"]
    local PaletteColours = DataTable[i]["COLOURS"]
    local PaletteNumColours = DataTable[i]["NUMCOLOURS"]
           
    BaseColourPalettesTable[#BaseColourPalettesTable +1 ] =
    {
        ["SPECIAL_KEY_WORDS"] = { Palette, "GcPaletteData.xml", "NumColours", PaletteNumColours },
        ["PRECEDING_KEY_WORDS"] = { "Colours" },
        ["REMOVE"] = "SECTION"
    }

    BaseColourPalettesTable[#BaseColourPalettesTable +1 ] = 
    {
        ["SPECIAL_KEY_WORDS"] = { Palette, "GcPaletteData.xml", "NumColours", PaletteNumColours },
        ["ADD"] = CreateColoursProperty(PaletteColours)
    }
end
